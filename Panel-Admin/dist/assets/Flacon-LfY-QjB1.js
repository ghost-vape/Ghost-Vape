import{r as o,j as e,B as s,k as m,c as h}from"./index-JOrpMNhF.js";import{d as y,D as w,a as E,b as S,c as k,e as C}from"./DataGrid-DR8JU-SN.js";import{a as u}from"./axios-ChMsnGDK.js";import"./Checkbox-DNkkIThj.js";const D=[{field:"nbrFlaconEmpty",headerName:"nbr Flacon Vide",width:150,editable:!0},{field:"PriceFlacon",headerName:"Prix Flacon",width:120,editable:!0},{field:"PriceUnitFlacon",headerName:"Prix Unitaire Flacon",type:"number",width:120,editable:!0},{field:"created_at",headerName:"Date de Vente",type:"number",width:200,editable:!0}];function v(){const[l,x]=o.useState([]),[F,i]=o.useState(!1),[c,g]=o.useState({nbrFlaconEmpty:"",PriceUnitFlacon:""}),[b,f]=o.useState(0),d=async()=>{try{const a=(await u.get("http://127.0.0.1:4000/StockFlacon/selectAllFlacon")).data.map((n,r)=>({...n,id:n.ID_StockFlacon||`id-${r}`}));x(a)}catch(t){console.log(t)}};o.useEffect(()=>{d()},[]),o.useEffect(()=>{const t=l.reduce((a,n)=>a+Number(n.nbrFlaconEmpty||0),0);f(t)},[l]);const p=t=>{const{name:a,value:n}=t.target;g(r=>({...r,[a]:n}))},j=async()=>{try{const{nbrFlaconEmpty:t,PriceUnitFlacon:a}=c;await u.post("http://127.0.0.1:4000/StockFlacon/insertFlacon",{nbrFlaconEmpty:t,PriceUnitFlacon:a}),i(!1),d()}catch(t){console.log(t)}};return e.jsxs(s,{sx:{height:400,width:"45%",marginLeft:"25%",background:"white",marginTop:"3%"},children:[e.jsx(s,{children:e.jsx(y,{sx:{cursor:"pointer",marginLeft:"3%",marginTop:"2%"},onClick:()=>i(!0)})}),e.jsxs(w,{open:F,onClose:()=>i(!1),children:[e.jsx(E,{children:"Add New Flacon"}),e.jsxs(S,{children:[e.jsx(m,{label:"nbr Flacon Vide",name:"nbrFlaconEmpty",value:c.nbrFlaconEmpty,onChange:p,variant:"outlined",fullWidth:!0,sx:{mb:1}}),e.jsx(m,{label:"Prix Unitaire Flacon",name:"PriceUnitFlacon",value:c.PriceUnitFlacon,onChange:p,variant:"outlined",fullWidth:!0,sx:{mb:1}})]}),e.jsxs(k,{children:[e.jsx(h,{onClick:()=>i(!1),children:"Cancel"}),e.jsx(h,{onClick:j,variant:"contained",color:"primary",children:"Add"})]})]}),e.jsx(C,{rows:l,columns:D,initialState:{pagination:{paginationModel:{pageSize:5}}},pageSizeOptions:[5],checkboxSelection:!0,disableRowSelectionOnClick:!0,sx:{marginTop:"2%"}}),e.jsx(s,{sx:{marginTop:"2%",textAlign:"right",paddingRight:"10%"},children:e.jsxs("strong",{children:["Total nbr Flacon Vide: ",b]})})]})}export{v as default};
