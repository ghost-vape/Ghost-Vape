import{r as l,j as e,B as h,k as c,F as w,I as y,S as k,c as u}from"./index-JOrpMNhF.js";import{d as v,D as T,a as A,b as D,c as P,e as Q}from"./DataGrid-DR8JU-SN.js";import{M as m,a as x}from"./axios-ChMsnGDK.js";import"./Checkbox-DNkkIThj.js";const I=[{field:"NomVape",headerName:"NomVape",width:190,editable:!0},{field:"PrixAchat",headerName:"Prix Achat",width:150,editable:!0},{field:"QteStockVape",headerName:"Qte Stock Vape",type:"number",width:150,editable:!0},{field:"Type",headerName:"Type",width:150,editable:!0},{field:"created_at",headerName:"Date de Vente",width:200,editable:!0}];function B(){const[f,V]=l.useState([]),[g,i]=l.useState(!1),[s,b]=l.useState({NomVape:"",PrixAchat:"",QteStockVape:"",Type:""}),[d,j]=l.useState(""),p=async()=>{try{const n=(await x.get("http://127.0.0.1:4000/VapeController/selectAllVapes")).data.map((t,o)=>({...t,id:t.ID_Vape||`id-${o}`,NomVape:t.NomVape||""}));V(n)}catch(a){console.log(a)}};l.useEffect(()=>{p()},[]);const r=a=>{const{name:n,value:t}=a.target;b(o=>({...o,[n]:t}))},S=async()=>{try{const{NomVape:a,PrixAchat:n,QteStockVape:t,Type:o}=s;await x.post("http://127.0.0.1:4000/VapeController/insertVape",{NomVape:a,PrixAchat:n,QteStockVape:t,Type:o}),i(!1),p()}catch(a){console.log(a)}},C=a=>{j(a.target.value)},N=f.filter(a=>a.NomVape&&a.NomVape.toLowerCase().includes(d.toLowerCase()));return e.jsxs(h,{sx:{height:700,width:"53%",marginLeft:"15%",background:"white",marginTop:"3%"},children:[e.jsxs(h,{component:"form",sx:{display:"flex",alignItems:"center","& > :not(style)":{m:1}},noValidate:!0,autoComplete:"off",children:[e.jsx(c,{id:"standard-basic",label:"Search",variant:"standard",value:d,onChange:C,sx:{marginLeft:"2%",top:"2%"}}),e.jsx(v,{sx:{cursor:"pointer",marginLeft:"3%",marginTop:"2%"},onClick:()=>i(!0)})]}),e.jsxs(T,{open:g,onClose:()=>i(!1),children:[e.jsx(A,{children:"Add New Vape"}),e.jsxs(D,{children:[e.jsx(c,{label:"Nom Vape",name:"NomVape",value:s.NomVape,onChange:r,variant:"outlined",fullWidth:!0,sx:{mb:1}}),e.jsx(c,{label:"Prix Achat",name:"PrixAchat",value:s.PrixAchat,onChange:r,variant:"outlined",fullWidth:!0,sx:{mb:1}}),e.jsx(c,{label:"Qte Stock Vape",name:"QteStockVape",value:s.QteStockVape,onChange:r,variant:"outlined",fullWidth:!0,sx:{mb:1}}),e.jsxs(w,{fullWidth:!0,sx:{mb:1},children:[e.jsx(y,{children:"Type Vape"}),e.jsxs(k,{label:"Type Vape",name:"Type",value:s.Type,onChange:r,variant:"outlined",children:[e.jsx(m,{value:"Puff",children:"Puff"}),e.jsx(m,{value:"Vape",children:"Vape"})]})]})]}),e.jsxs(P,{children:[e.jsx(u,{onClick:()=>i(!1),children:"Cancel"}),e.jsx(u,{onClick:S,children:"Add"})]})]}),e.jsx(Q,{rows:N,columns:I,initialState:{pagination:{paginationModel:{pageSize:10}}},pageSizeOptions:[5],checkboxSelection:!0,disableRowSelectionOnClick:!0,sx:{marginTop:"2%"}})]})}export{B as default};
