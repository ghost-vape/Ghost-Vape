import{r as i,j as e,B as m,k as C,c as r}from"./index-JOrpMNhF.js";import{d as _,D as x,a as f,b as g,c as D,e as M}from"./DataGrid-DR8JU-SN.js";import{a as u}from"./axios-ChMsnGDK.js";import"./Checkbox-DNkkIThj.js";const T=[{field:"CaisseDebut",headerName:"Fond De Caisse",width:250,editable:!0},{field:"CaisseFin",headerName:"Caisse Fin de Jour",width:200,editable:!0},{field:"BeneficeCaisse",headerName:"Total Vente",width:200,editable:!0},{field:"Ventesupposer",headerName:"Vente suposer",width:200,editable:!0},{field:"Masrouf",headerName:"Masrouf",width:200,editable:!0},{field:"Created_at",headerName:"Date de Caisse",type:"number",width:200,editable:!0}];function V(){const[b,j]=i.useState([]),[w,o]=i.useState(!1),[F,l]=i.useState(!1),[h,k]=i.useState({CaisseDebut:""}),[d,p]=i.useState({ID_Caisee:"",CaisseFin:""}),c=async()=>{try{const a=(await u.get("http://127.0.0.1:4000/Caisse/selectCaisse")).data.map((t,n)=>({...t,id:t.ID_Caisse||`id-${n}`}));j(a)}catch(s){console.log(s)}};i.useEffect(()=>{c()},[]);const v=s=>{const{name:a,value:t}=s.target;k(n=>({...n,[a]:t}))},I=s=>{const{name:a,value:t}=s.target;p(n=>({...n,[a]:t}))},S=async()=>{try{const{CaisseDebut:s}=h;await u.post("http://127.0.0.1:4000/Caisse/insertCaisse",{CaisseDebut:s}),o(!1),c()}catch(s){console.log(s)}},y=async()=>{try{const{ID_Caisee:s,CaisseFin:a}=d;await u.post("http://127.0.0.1:4000/Caisse/updateCaisse",{ID_Caisee:s,CaisseFin:a}),l(!1),c()}catch(s){console.log(s)}},N=s=>{p({ID_Caisee:s.row.ID_Caisee,CaisseFin:""}),l(!0)};return e.jsxs(m,{sx:{height:700,width:"90%",marginLeft:"5%",background:"white",marginTop:"3%"},children:[e.jsx(m,{children:e.jsx(_,{sx:{cursor:"pointer",marginLeft:"3%",marginTop:"2%"},onClick:()=>o(!0)})}),e.jsxs(x,{open:w,onClose:()=>o(!1),children:[e.jsx(f,{children:" Fond de Caisse"}),e.jsx(g,{children:e.jsx(C,{label:"Fond de Caisse",name:"CaisseDebut",value:h.Nom,onChange:v,variant:"outlined",fullWidth:!0,sx:{mb:1}})}),e.jsxs(D,{children:[e.jsx(r,{onClick:()=>o(!1),children:"Cancel"}),e.jsx(r,{onClick:S,variant:"contained",color:"primary",children:"Add"})]})]}),e.jsxs(x,{open:F,onClose:()=>l(!1),children:[e.jsx(f,{children:" Caisse Fin De Jour"}),e.jsxs(g,{children:[e.jsx(C,{label:"ID Caisse",name:"ID_Caisee",value:d.ID_Caisee,variant:"outlined",fullWidth:!0,sx:{mb:1,marginTop:"2%"}}),e.jsx(C,{label:"CaisseFin",name:"CaisseFin",value:d.CaisseFin,onChange:I,variant:"outlined",fullWidth:!0,sx:{mb:1}})]}),e.jsxs(D,{children:[e.jsx(r,{onClick:()=>l(!1),children:"Cancel"}),e.jsx(r,{onClick:y,variant:"contained",color:"primary",children:"Add"})]})]}),e.jsx(M,{rows:b,columns:T,initialState:{pagination:{paginationModel:{pageSize:10}}},pageSizeOptions:[5],checkboxSelection:!0,disableRowSelectionOnClick:!0,onRowClick:N,sx:{marginTop:"2%"}})]})}export{V as default};
