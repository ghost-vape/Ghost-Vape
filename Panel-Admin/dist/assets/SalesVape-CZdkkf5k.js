import{r as t,j as a,B as h,k as m,S as k,c as u}from"./index-JOrpMNhF.js";import{d as D,D as P,a as L,b as E,c as A,e as B}from"./DataGrid-DR8JU-SN.js";import{M as I,a as l}from"./axios-ChMsnGDK.js";import"./Checkbox-DNkkIThj.js";const M=[{field:"NomVape",headerName:"Nom Vape",width:190,editable:!0},{field:"PrixAchat",headerName:"Prix Achat",width:150,editable:!0},{field:"PrixVente",headerName:"Prix Vente",type:"number",width:150,editable:!0},{field:"BeneficeVape",headerName:"Bénéfice Vape",type:"number",width:150,editable:!0},{field:"created_at",headerName:"Date de Vente",type:"number",width:200,editable:!0}];function z(){const[V,x]=t.useState([]),[f,o]=t.useState(!1),[g,C]=t.useState([]),[n,N]=t.useState({NomVape:"",PrixVente:""}),[c,S]=t.useState(""),d=async()=>{try{const s=(await l.get("http://127.0.0.1:4000/VapeController/selectAllVapesSales")).data.map((r,i)=>({...r,id:r.ID_SalesVape||`id-${i}`,NomVape:r.NomVape||""}));x(s)}catch(e){console.error("Error fetching data:",e)}},b=async()=>{try{const e=await l.get("http://127.0.0.1:4000/VapeController/selectAllVapes");C(e.data)}catch(e){console.error("Error fetching vape list:",e)}};t.useEffect(()=>{d(),b()},[]);const p=e=>{const{name:s,value:r}=e.target;N(i=>({...i,[s]:r}))},j=async()=>{if(!n.NomVape||!n.PrixVente){console.error("Please fill out all fields.");return}try{await l.post("http://127.0.0.1:4000/VapeController/VenteVape",n),o(!1),d()}catch(e){console.error("Error inserting vape:",e)}},w=e=>{S(e.target.value)},v=V.filter(e=>e.NomVape&&e.NomVape.toLowerCase().includes(c.toLowerCase())),y=e=>{console.log("Cell clicked:",e)};return a.jsxs(h,{sx:{height:700,width:"60%",marginLeft:"15%",background:"white",marginTop:"3%"},children:[a.jsxs(h,{component:"form",sx:{display:"flex",alignItems:"center","& > :not(style)":{m:1}},noValidate:!0,autoComplete:"off",children:[a.jsx(m,{id:"search-field",label:"Search",variant:"standard",value:c,onChange:w,sx:{marginLeft:"2%",top:"2%"}}),a.jsx(D,{sx:{cursor:"pointer",marginLeft:"3%",marginTop:"2%"},onClick:()=>o(!0)})]}),a.jsxs(P,{open:f,onClose:()=>o(!1),children:[a.jsx(L,{children:"Vente Vape"}),a.jsxs(E,{children:[a.jsx(k,{label:"Nom Vape",name:"NomVape",value:n.NomVape,onChange:p,fullWidth:!0,variant:"outlined",sx:{mb:1},children:g.map(e=>a.jsx(I,{value:e.NomVape,children:e.NomVape},e.ID_Vape))}),a.jsx(m,{label:"Prix Vente",name:"PrixVente",value:n.PrixVente,onChange:p,variant:"outlined",fullWidth:!0,sx:{mb:1}})]}),a.jsxs(A,{children:[a.jsx(u,{onClick:()=>o(!1),children:"Cancel"}),a.jsx(u,{onClick:j,variant:"contained",color:"primary",children:"Save"})]})]}),a.jsx(B,{rows:v,columns:M,initialState:{pagination:{paginationModel:{pageSize:10}}},pageSizeOptions:[5],checkboxSelection:!0,disableRowSelectionOnClick:!0,sx:{marginTop:"2%"},onCellClick:y})]})}export{z as default};
