import{r as n,j as t,B as h,F as A,I as w,S as C,k as x,c as m}from"./index-JOrpMNhF.js";import{d as I,D as y,a as S,b as P,c as _,e as N}from"./DataGrid-DR8JU-SN.js";import{M as k,a as c}from"./axios-ChMsnGDK.js";import"./Checkbox-DNkkIThj.js";const Q=[{field:"Article",headerName:"Article",width:190,editable:!0},{field:"PrixAchat",headerName:"Prix Achat",width:150,editable:!0},{field:"PrixVente",headerName:"Prix Vente",type:"number",width:150,editable:!0},{field:"QteVendu",headerName:"Qte Vendu",type:"number",width:150,editable:!0},{field:"Total",headerName:"Total",type:"number",width:150,editable:!0},{field:"BeneficeArticle",headerName:"Benefice Article",type:"number",width:150,editable:!0},{field:"created_at",headerName:"Date de Vente",width:200,editable:!0}];function F(){const[p,D]=n.useState([]),[v,r]=n.useState(!1),[f,g]=n.useState([]),[s,d]=n.useState({ID_Divers:"",Article:"",QteVendu:"",PrixVente:""}),u=async()=>{try{const i=(await c.get("http://127.0.0.1:4000/Divers/selectVenteDivers")).data.map((a,o)=>({...a,id:a.ID_Divers||`id-${o}`}));D(i)}catch(e){console.log(e)}},b=async()=>{try{const e=await c.get("http://127.0.0.1:4000/Divers/selectAllDivers");g(e.data)}catch(e){console.log(e)}};n.useEffect(()=>{u(),b()},[]);const l=e=>{const{name:i,value:a}=e.target;d(o=>({...o,[i]:a}))},V=async()=>{try{const{ID_Divers:e,QteVendu:i,PrixVente:a}=s;await c.post("http://127.0.0.1:4000/Divers/venteDivers",{ID_Divers:e,QteVendu:i,PrixVente:a}),r(!1),u()}catch(e){console.log(e)}},j=()=>{d({ID_Divers:"",Article:"",QteVendu:"",PrixVente:""}),r(!0)};return t.jsxs(h,{sx:{height:700,width:"80%",marginLeft:"10%",background:"white",marginTop:"3%"},children:[t.jsx(h,{children:t.jsx(I,{sx:{cursor:"pointer",marginLeft:"3%",marginTop:"2%"},onClick:j})}),t.jsxs(y,{open:v,onClose:()=>r(!1),children:[t.jsx(S,{children:"Vente Divers"}),t.jsxs(P,{children:[t.jsxs(A,{fullWidth:!0,sx:{mb:2},children:[t.jsx(w,{children:"Article"}),t.jsx(C,{label:"Article",name:"ID_Divers",value:s.ID_Divers,onChange:l,children:f.map(e=>t.jsx(k,{value:e.ID_Divers,children:e.Article},e.ID_Divers))})]}),t.jsx(x,{label:"Qte Vendu",name:"QteVendu",value:s.QteVendu,onChange:l,variant:"outlined",fullWidth:!0,sx:{mb:1}}),t.jsx(x,{label:"Prix Vente",name:"PrixVente",value:s.PrixVente,onChange:l,variant:"outlined",fullWidth:!0,sx:{mb:1}})]}),t.jsxs(_,{children:[t.jsx(m,{onClick:()=>r(!1),children:"Cancel"}),t.jsx(m,{onClick:V,variant:"contained",color:"primary",children:"Add"})]})]}),t.jsx(N,{rows:p,columns:Q,initialState:{pagination:{paginationModel:{pageSize:5}}},pageSizeOptions:[5],checkboxSelection:!0,disableRowSelectionOnClick:!0,sx:{marginTop:"2%"}})]})}export{F as default};
