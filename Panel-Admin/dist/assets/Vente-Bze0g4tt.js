import{r as a,u as D,j as t,B as L,k as m,F as I,I as F,S as k,O as T,c as b}from"./index-JOrpMNhF.js";import{d as V,D as M,a as O,b as R,c as E,e as W}from"./DataGrid-DR8JU-SN.js";import{M as _,a as p}from"./axios-ChMsnGDK.js";import"./Checkbox-DNkkIThj.js";const A=48,B=8,G={PaperProps:{style:{maxHeight:A*4.5+B,width:250}}};function H(u,c,l){return{fontWeight:c.indexOf(u)===-1?l.typography.fontWeightRegular:l.typography.fontWeightMedium}}const z=[{field:"NomLiquide",headerName:"Nom Liquide",width:150,editable:!0},{field:"NbrFlaconSale",headerName:"Nbr Flacon Vendu",width:150,editable:!0},{field:"PriceUnitSales",headerName:"Prix Unitaire",type:"number",width:150,editable:!0},{field:"PriceLiquide",headerName:"Prix Liquide",type:"number",width:150,editable:!0},{field:"ProfitSales",headerName:"Benefis Vente",type:"number",width:150,editable:!0},{field:"TotalSales",headerName:"Total Vente",type:"number",width:150,editable:!0},{field:"created_at",headerName:"Date de Vente",width:200,editable:!0}];function Q(){const[u,c]=a.useState([]),[l,g]=a.useState(""),[q,r]=a.useState(!1),[n,h]=a.useState({NomLiquide:"",NbrFlacon:"",PriceLiquide:""}),[N,S]=a.useState([]),j=D(),x=async()=>{try{const[e,i]=await Promise.all([p.get("http://127.0.0.1:4000/StockController/selectAllSales"),p.get("http://127.0.0.1:4000/StockController/selectAllLiquide")]),s=e.data.map((o,P)=>({...o,id:o.ID_Sales||`id-${P}`}));c(s);const d=i.data.map(o=>({value:o.NomLiquide,label:o.NomLiquide}));S(d)}catch(e){console.log(e)}};a.useEffect(()=>{x()},[]);const f=e=>{const{name:i,value:s}=e.target;h(d=>({...d,[i]:s}))},C=e=>{h(i=>({...i,NomLiquide:e.target.value}))},w=async()=>{try{const{NomLiquide:e,NbrFlacon:i,PriceLiquide:s}=n,d=await p.post("http://127.0.0.1:4000/StockController/vendreLiquide",{NomLiquide:e,NbrFlacon:i,PriceLiquide:s});r(!1),h({NomLiquide:"",NbrFlacon:"",PriceLiquide:""}),x()}catch(e){console.log(e)}},v=e=>{g(e.target.value)},y=u.filter(e=>e.NomLiquide.toLowerCase().includes(l.toLowerCase()));return t.jsxs(L,{sx:{height:700,width:"75%",marginLeft:"15%",background:"white"},children:[t.jsxs(L,{component:"form",sx:{display:"flex",alignItems:"center","& > :not(style)":{m:1}},noValidate:!0,autoComplete:"off",children:[t.jsx(m,{id:"standard-basic",label:"Search",variant:"standard",value:l,onChange:v,sx:{marginLeft:"2%",top:"2%"}}),t.jsx(V,{sx:{cursor:"pointer"},onClick:()=>r(!0)})]}),t.jsxs(M,{open:q,onClose:()=>r(!1),children:[t.jsx(O,{children:"Vente Liquide"}),t.jsxs(R,{children:[t.jsxs(I,{fullWidth:!0,variant:"outlined",sx:{mb:1},children:[t.jsx(F,{id:"NomLiquide",children:"Nom Liquide"}),t.jsx(k,{labelId:"NomLiquide",id:"NomLiquide",value:n.NomLiquide,onChange:C,input:t.jsx(T,{label:"NomLiquide"}),MenuProps:G,children:N.map(e=>t.jsx(_,{value:e.value,style:H(e.value,n.NomLiquide,j),children:e.label},e.value))})]}),t.jsx(m,{label:"Nbr Flacon",name:"NbrFlacon",value:n.NbrFlacon,onChange:f,variant:"outlined",fullWidth:!0,sx:{mb:1}}),t.jsx(m,{label:"Prix Liquide",name:"PriceLiquide",value:n.PriceLiquide,onChange:f,variant:"outlined",fullWidth:!0,sx:{mb:1}})]}),t.jsxs(E,{children:[t.jsx(b,{onClick:()=>r(!1),children:"Cancel"}),t.jsx(b,{onClick:w,children:"Add"})]})]}),t.jsx(W,{rows:y,columns:z,initialState:{pagination:{paginationModel:{pageSize:10}}},pageSizeOptions:[5],checkboxSelection:!0,disableRowSelectionOnClick:!0,sx:{marginTop:"2%"}})]})}export{Q as default};
