import{r as n,j as e,B as p,k as r,c as u}from"./index-JOrpMNhF.js";import{d as k,D as f,a as b,b as g,c as j,e as I}from"./DataGrid-DR8JU-SN.js";import{a as m}from"./axios-ChMsnGDK.js";import"./Checkbox-DNkkIThj.js";const S=[{field:"Article",headerName:"Article",width:190,editable:!0},{field:"PrixAchat",headerName:"Prix Achat",width:150,editable:!0},{field:"Qte",headerName:"Qte",type:"number",width:150,editable:!0},{field:"PrixVente",headerName:"Prix Vente",type:"number",width:150,editable:!0},{field:"QteVendu",headerName:"Qte Vendu",type:"number",width:150,editable:!0},{field:"Total",headerName:"Total",type:"number",width:150,editable:!0},{field:"BeneficeArticle",headerName:"Benefice Article",type:"number",width:150,editable:!0},{field:"created_at",headerName:"Date de Vente",type:"number",width:200,editable:!0}];function M(){const[w,A]=n.useState([]),[C,l]=n.useState(!1),[V,o]=n.useState(!1),[d,P]=n.useState({Article:"",PrixAchat:"",Qte:""}),[c,v]=n.useState({ID_Divers:"",QteVendu:"",PrixVente:""}),h=async()=>{try{const i=(await m.get("http://127.0.0.1:4000/Divers/selectAllDivers")).data.map((a,s)=>({...a,id:a.ID_Divers||`id-${s}`}));A(i)}catch(t){console.log(t)}};n.useEffect(()=>{h()},[]);const D=t=>{const{name:i,value:a}=t.target;v(s=>({...s,[i]:a}))},x=t=>{const{name:i,value:a}=t.target;P(s=>({...s,[i]:a}))},Q=async()=>{try{const{Article:t,PrixAchat:i,Qte:a}=d;await m.post("http://127.0.0.1:4000/Divers/insertDivers",{Article:t,PrixAchat:i,Qte:a}),l(!1),h()}catch(t){console.log(t)}},y=async()=>{try{const{ID_Divers:t,QteVendu:i,PrixVente:a}=c;await m.post("http://127.0.0.1:4000/Divers/venteDivers",{ID_Divers:t,QteVendu:i,PrixVente:a}),o(!1),h()}catch(t){console.log(t)}},N=t=>{v({ID_Divers:t.row.ID_Divers,QteVendu:"",PrixVente:""}),o(!0)};return e.jsxs(p,{sx:{height:700,width:"90%",marginLeft:"5%",background:"white",marginTop:"3%"},children:[e.jsx(p,{children:e.jsx(k,{sx:{cursor:"pointer",marginLeft:"3%",marginTop:"2%"},onClick:()=>l(!0)})}),e.jsxs(f,{open:C,onClose:()=>l(!1),children:[e.jsx(b,{children:"Add New Divers"}),e.jsxs(g,{children:[e.jsx(r,{label:"Article",name:"Article",value:d.Article,onChange:x,variant:"outlined",fullWidth:!0,sx:{mb:1}}),e.jsx(r,{label:"Prix Achat",name:"PrixAchat",value:d.PrixAchat,onChange:x,variant:"outlined",fullWidth:!0,sx:{mb:1}}),e.jsx(r,{label:"Qte",name:"Qte",value:d.Qte,onChange:x,variant:"outlined",fullWidth:!0,sx:{mb:1}})]}),e.jsxs(j,{children:[e.jsx(u,{onClick:()=>l(!1),children:"Cancel"}),e.jsx(u,{onClick:Q,variant:"contained",color:"primary",children:"Add"})]})]}),e.jsxs(f,{open:V,onClose:()=>o(!1),children:[e.jsx(b,{children:"Insert Divers"}),e.jsxs(g,{children:[e.jsx(r,{label:"ID_Divers",name:"ID_Divers",value:c.ID_Divers,variant:"outlined",fullWidth:!0,disabled:!0,sx:{mb:1}}),e.jsx(r,{label:"Qte Vendu",name:"QteVendu",value:c.QteVendu,onChange:D,variant:"outlined",fullWidth:!0,sx:{mb:1}}),e.jsx(r,{label:"Prix Vente",name:"PrixVente",value:c.PrixVente,onChange:D,variant:"outlined",fullWidth:!0,sx:{mb:1}})]}),e.jsxs(j,{children:[e.jsx(u,{onClick:()=>o(!1),children:"Cancel"}),e.jsx(u,{onClick:y,variant:"contained",color:"primary",children:"Add"})]})]}),e.jsx(I,{rows:w,columns:S,initialState:{pagination:{paginationModel:{pageSize:5}}},pageSizeOptions:[5],checkboxSelection:!0,disableRowSelectionOnClick:!0,onRowClick:N,sx:{marginTop:"2%"}})]})}export{M as default};
